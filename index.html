<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Bangla Earn Mini App</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
body{margin:0;padding:0;font-family:'Roboto',sans-serif;background:#f5f7fb;}
.container{max-width:420px;margin:auto;padding:15px;}
.card{background:#fff;border-radius:15px;box-shadow:0 6px 15px rgba(0,0,0,0.08);padding:20px;margin-bottom:15px;}
h1{text-align:center;color:#0a7cff;margin-bottom:15px;font-weight:700;}
input, select{width:100%;padding:12px;margin:6px 0;border-radius:10px;border:1px solid #ccc;font-size:16px;}
.btn{width:100%;padding:14px;margin-top:12px;border:none;border-radius:10px;font-size:16px;background:#0a7cff;color:#fff;font-weight:500;cursor:pointer;transition:0.3s;}
.btn:hover{background:#0965d3;}
.btn:disabled{background:#aaa;cursor:not-allowed;}
.navbar{display:flex;justify-content:space-between;position:fixed;bottom:0;width:100%;max-width:420px;margin:auto;padding:5px 0;background:#fff;box-shadow:0 -3px 8px rgba(0,0,0,0.1);}
.navbar button{flex:1;margin:0 2px;padding:10px;font-size:14px;border:none;border-radius:10px;background:#e9eef3;cursor:pointer;transition:0.3s;}
.navbar button.active{background:#0a7cff;color:#fff;}
.balance{text-align:center;font-size:18px;font-weight:700;margin-bottom:10px;}
.hidden{display:none;}
#timer{text-align:center;font-size:22px;margin:12px 0;color:#ff5722;font-weight:500;}
.calendar span{display:inline-block;padding:6px 12px;margin:4px;border-radius:8px;background:#eee;font-size:14px;}
.checked{background:#0a7cff;color:#fff;}
.refbox, .history-box, .info-box{background:#f1f4f8;padding:12px;border-radius:10px;margin-top:10px;font-size:14px;}
.copy-btn{padding:6px 10px;margin-top:5px;background:#0a7cff;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;}
.copy-btn:hover{background:#0965d3;}
</style>
</head>
<body>
<div class="container">

<!-- Page 1: Registration -->
<div class="card" id="page1">
<h1>Register Account</h1>
<input type="text" id="regName" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
<input type="text" id="regMobile" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞">
<select id="regMethod">
<option value="">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
<option value="Bikash">Bikash</option>
<option value="Nagad">‡¶®‡¶ó‡¶¶</option>
</select>
<input type="text" id="regAcc" placeholder="Payment Account Number">
<button class="btn" onclick="registerUser()">Register</button>
<p id="regMsg" style="text-align:center;margin-top:10px;color:red;"></p>
</div>

<!-- Page 2: Home -->
<div class="card hidden" id="page2">
<h1>Bangla Earn</h1>
<div class="balance">üí∞ Balance: <span id="bal">0</span> ‡¶ü‡¶æ‡¶ï‡¶æ</div>
<p style="text-align:center;">Welcome, <span id="userName"></span></p>
</div>

<!-- Page 3: Earn -->
<div class="card hidden" id="page3">
<h1>Earn</h1>
<button class="btn" id="adBtn" onclick="startAd()">‚ñ∂Ô∏è Ad ‡¶¶‡ßá‡¶ñ‡ßã (1 ‡¶ü‡¶æ‡¶ï‡¶æ)</button>
<div id="timer"></div>
<button class="btn" onclick="checkIn()">üìÖ Daily Check-in</button>
<div class="calendar" id="calendar"></div>
<button class="btn" id="taskBtn" onclick="dailyTask()">üì∫ Daily Task (10 ‡¶ü‡¶æ‡¶ï‡¶æ)</button>
<p id="earnMsg" style="text-align:center;margin-top:10px;"></p>
</div>

<!-- Page 4: Team / Referral -->
<div class="card hidden" id="page4">
<h1>Team / Referral</h1>
<div class="refbox" id="refBox"></div>
</div>

<!-- Page 5: Withdraw -->
<div class="card hidden" id="page5">
<h1>Withdraw</h1>
<div class="info-box">
<p>Payment Method: <span id="payMethod"></span></p>
<p>Account Number: <span id="payAcc"></span></p>
</div>
<input type="number" id="withdrawAmt" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶®">
<button class="btn" onclick="withdraw()">üí≥ Withdraw</button>
<p id="withdrawMsg" style="text-align:center;margin-top:10px;color:green;"></p>
</div>

<!-- Page 6: History -->
<div class="card hidden" id="page6">
<h1>History</h1>
<div class="history-box" id="historyBox"></div>
</div>

<!-- Page 7: Profile -->
<div class="card hidden" id="page7">
<h1>Profile</h1>
<p>‡¶®‡¶æ‡¶Æ: <span id="profileName"></span></p>
<p>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤: <span id="profileMobile"></span></p>
<p>Payment Method: <span id="profileMethod"></span></p>
<p>Account: <span id="profileAcc"></span></p>
<p>Registered: <span id="profileDate"></span></p>
<button class="btn" onclick="editProfile()">Edit Profile</button>
</div>

<!-- Bottom Navigation -->
<div class="navbar">
<button onclick="nav(2)" id="navHome" class="active">Home</button>
<button onclick="nav(3)" id="navEarn">Earn</button>
<button onclick="nav(4)" id="navTeam">Team</button>
<button onclick="nav(5)" id="navWithdraw">Withdraw</button>
<button onclick="nav(6)" id="navHistory">History</button>
<button onclick="nav(7)" id="navProfile">Profile</button>
</div>

</div>

<script>
// --- Variables ---
let user = JSON.parse(localStorage.getItem("user")) || null;
let balance = Number(localStorage.getItem("bal")) || 0;
let adRunning = false;
let refCode = localStorage.getItem("refCode") || ("BE"+Math.floor(Math.random()*100000));
localStorage.setItem("refCode",refCode);
let referrals = JSON.parse(localStorage.getItem("refList")||"[]");
document.getElementById("bal").innerText = balance;

// --- Registration ---
function registerUser(){
    let name = document.getElementById("regName").value.trim();
    let mobile = document.getElementById("regMobile").value.trim();
    let method = document.getElementById("regMethod").value;
    let acc = document.getElementById("regAcc").value.trim();
    if(!name || !mobile || !method || !acc){document.getElementById("regMsg").innerText="‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®"; return;}
    if(user){document.getElementById("regMsg").innerText="‡¶è‡¶ï ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá ‡¶è‡¶ï‡¶ü‡¶æ‡¶á ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü allowed"; return;}
    user = {name,mobile,method,acc,date:new Date().toLocaleDateString()};
    localStorage.setItem("user",JSON.stringify(user));
    showHome();
}

// --- Navigation ---
function nav(page){
    for(let i=2;i<=7;i++){
        document.getElementById("page"+i).classList.add("hidden");
        document.getElementById("nav"+["Home","Earn","Team","Withdraw","History","Profile"][i-2]).classList.remove("active");
    }
    document.getElementById("page"+page).classList.remove("hidden");
    document.getElementById("nav"+["Home","Earn","Team","Withdraw","History","Profile"][page-2]).classList.add("active");
    if(page==2) showHome();
    if(page==3) renderCalendar();
    if(page==4) showReferral();
    if(page==6) showHistory();
    if(page==7) showProfile();
}

// --- Home Page ---
function showHome(){
    if(!user) return; page1.classList.add("hidden"); page2.classList.remove("hidden");
    document.getElementById("userName").innerText = user.name;
    document.getElementById("bal").innerText = balance;
    document.getElementById("payMethod").innerText = user.method;
    document.getElementById("payAcc").innerText = user.acc;
}

// --- Earn Page ---
function startAd(){
    if(adRunning)return;
    if(localStorage.getItem("adDone")==today()) return alert("‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ Ad ‡¶∂‡ßá‡¶∑");
    adRunning=true; let t=15; document.getElementById("timer").innerText="‚è≥ "+t+"s";
    adBtn.disabled=true;
    let interval=setInterval(()=>{
        t--; document.getElementById("timer").innerText="‚è≥ "+t+"s";
        if(t==0){clearInterval(interval); document.getElementById("timer").innerText=""; balance+=1; localStorage.setItem("bal",balance); localStorage.setItem("adDone",today()); alert("Ad Complete +1 ‡¶ü‡¶æ‡¶ï‡¶æ"); adRunning=false; adBtn.disabled=false;}
    },1000);
}
function checkIn(){if(localStorage.getItem("checkin")==today()) return alert("‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ Check-in ‡¶®‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá"); balance+=2; localStorage.setItem("bal",balance); localStorage.setItem("checkin",today()); renderCalendar(); alert("Check-in +2 ‡¶ü‡¶æ‡¶ï‡¶æ");}
function dailyTask(){if(localStorage.getItem("task")==today()) return alert("‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ Task ‡¶∂‡ßá‡¶∑"); balance+=10; localStorage.setItem("bal",balance); localStorage.setItem("task",today()); alert("Task +10 ‡¶ü‡¶æ‡¶ï‡¶æ");}

// --- Calendar ---
function renderCalendar(){let d=new Date().getDate(); calendar.innerHTML=""; for(let i=1;i<=7;i++){let s=document.createElement("span"); s.innerText="Day "+i; if(i<=d%7)s.classList.add("checked"); calendar.appendChild(s);}}

// --- Referral / Team ---
function showReferral(){let box=document.getElementById("refBox"); let link=location.origin+location.pathname+"?ref="+refCode; box.innerHTML=`<b>üîó Code:</b> ${refCode}<br><b>üìé Link:</b><br>${link}<br><b>Total Refer:</b> ${referrals.length}<br><b>1st Gen Commission:</b> ... <br><b>2nd Gen Commission:</b> ...<br><button class="copy-btn" onclick="copyLink('${link}')">Copy Link</button>`;}
function copyLink(link){navigator.clipboard.writeText(link); alert("Referral link copied!");}

// --- Withdraw ---
function withdraw(){
    let amt = Number(document.getElementById("withdrawAmt").value);
    if(amt<130){alert("Minimum 130 required"); return;}
    if(amt>balance){alert("Insufficient balance"); return;}
    balance-=amt;
    localStorage.setItem("bal",balance);
    alert("Withdraw request sent! (24h processing)");
    showHistory();
}

// --- History ---
function showHistory(){document.getElementById("historyBox").innerHTML=`Balance: ${balance}<br>Ad, Task, Check-in & Referral history cards here`;}

// --- Profile ---
function showProfile(){document.getElementById("profileName").innerText=user.name; document.getElementById("profileMobile").innerText=user.mobile; document.getElementById("profileMethod").innerText=user.method; document.getElementById("profileAcc").innerText=user.acc; document.getElementById("profileDate").innerText=user.date;}
function editProfile(){let newName=prompt("‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:",user.name); if(newName){user.name=newName; localStorage.setItem("user",JSON.stringify(user)); showProfile(); showHome();}}

// --- Utility ---
function today(){return new Date().toDateString();}

// --- Initial Load ---
if(user){page1.classList.add("hidden"); showHome();} else{page1.classList.remove("hidden");}
</script>
</body>
                       </html>
